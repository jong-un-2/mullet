"use strict";(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[2858],{95714:function(e,n,t){t.r(n);var l=t(15009),i=t.n(l),a=t(97857),s=t.n(a),r=t(99289),o=t.n(r),u=t(5574),d=t.n(u),c=t(2618),p=t(90930),f=t(2453),x=t(83622),y=t(55102),h=t(34041),v=t(4930),m=t(78818),g=t(24426),j=t(19151),b=t(67294),S=t(79090),w=t(51042),Z=(t(40190),t(85893));n.default=function(){var e,n;(0,b.useEffect)((function(){Ee(1)}),[]);var t=(0,b.useState)([]),l=d()(t,2),a=l[0],r=l[1],u=(0,b.useState)({}),z=d()(u,2),C=z[0],B=z[1],k=(0,b.useState)({}),N=d()(k,2),I=N[0],T=N[1],U=(0,b.useState)(!1),D=d()(U,2),P=D[0],L=D[1],J=(0,b.useState)(!1),O=d()(J,2),E=O[0],F=O[1],R=(0,b.useState)(!1),_=d()(R,2),A=_[0],G=_[1],H=(0,b.useState)(""),W=d()(H,2),Y=W[0],q=W[1],K=(0,b.useState)(""),M=d()(K,2),Q=M[0],V=M[1],X=(0,b.useState)(""),$=d()(X,2),ee=$[0],ne=$[1],te=(0,b.useState)(""),le=d()(te,2),ie=le[0],ae=le[1],se=(0,b.useState)("1"),re=d()(se,2),oe=re[0],ue=re[1],de=(0,b.useState)(""),ce=d()(de,2),pe=ce[0],fe=ce[1],xe=(0,b.useState)(""),ye=d()(xe,2),he=ye[0],ve=ye[1],me=(0,b.useState)("0"),ge=d()(me,2),je=ge[0],be=ge[1],Se=(0,b.useState)(""),we=d()(Se,2),Ze=we[0],ze=we[1],Ce=(0,b.useState)(""),Be=d()(Ce,2),ke=Be[0],Ne=Be[1],Ie=(0,b.useState)({bannerName:"",language:"",position:""}),Te=d()(Ie,2),Ue=Te[0],De=Te[1],Pe=(0,b.useState)(!1),Le=d()(Pe,2),Je=Le[0],Oe=Le[1],Ee=function(){var e=o()(i()().mark((function e(n){var t,l,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s()({pageNum:n,pageSize:10},Ue),e.next=3,(0,c.Eg)(t);case 3:200==(l=e.sent).code&&(a=l.data.records.map((function(e){return s()(s()({},e),{},{status:0==e.status?"不启用":"启用",jumpType:0==e.jumpType?"新窗口":"内部跳转",position:1==e.position?"首页":2==e.position?"充值页":3==e.position?"活动中心":null,language:"en"==e.language?"英文":"zh-CN"==e.language?"简体中文":"vi"==e.language?"越南":"pt"==e.language?"葡萄牙":"es"==e.language?"西班牙":null})})),r(a),B(l.data));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Fe=[{title:"语言",dataIndex:"language",key:"language"},{title:"名称",dataIndex:"bannerName",key:"bannerName"},{title:"位置",dataIndex:"position",key:"position"},{title:"跳转类型",dataIndex:"jumpType",key:"jumpType"},{title:"跳转链接",dataIndex:"jumpUrl",key:"jumpUrl"},{title:"app跳转链接",dataIndex:"appJumpUrl",key:"appJumpUrl"},{title:"排序",dataIndex:"sort",key:"sort"},{title:"状态",dataIndex:"status",key:"status"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作人",dataIndex:"operatorName",key:"operatorName"},{title:"操作",dataIndex:"action",key:"action",render:function(e,n){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("a",{style:{marginRight:10},onClick:function(){T(n),L(!0)},children:"修改"}),(0,Z.jsx)("a",{style:{marginRight:10},onClick:function(){T(n),G(!0)},children:"删除"})]})}}],Re=function(){var e=o()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ie||ke){e.next=3;break}return f.ZP.warning("语言或者位置不能为空"),e.abrupt("return");case 3:return n={bannerName:Y,bannerUrl:Q,position:ie,jumpType:je,jumpUrl:pe,sort:Ze,status:oe,language:ke,appJumpUrl:he},e.next=6,(0,c.ON)(n);case 6:200==(t=e.sent).code?(f.ZP.success("新建成功"),Ee(1),F(!1)):f.ZP.error(t.msg);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=o()(i()().mark((function e(){var n,t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s()(s()({},I),{},{jumpType:"新窗口"==I.jumpType?0:"内部跳转"==I.jumpType?1:I.jumpType,status:"不启用"==I.status?0:"启用"==I.status?1:I.status,position:"首页"==I.position?1:"充值页"==I.position?2:"活动中心"==I.position?3:I.position,language:"英文"==I.language?"en":"简体中文"==I.language?"zh-CN":"葡萄牙"==I.language?"pt":"西班牙"==I.language?"es":"越南"==I.language?"vi":I.language}),e.next=3,(0,c.Id)(n);case 3:200==(t=e.sent).code?(f.ZP.success("修改成功"),L(!1),Ee(1)):f.ZP.error(t.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=o()(i()().mark((function e(){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.H_)(null==I?void 0:I.id);case 2:200==(n=e.sent).code?(f.ZP.success("删除成功"),Ee(1),G(!1)):f.ZP.error(n.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ge=function(e,n){var t=new FileReader;t.addEventListener("load",(function(){return n(t.result)})),t.readAsDataURL(e)},He=function(e){var n="image/jpeg"===e.type||"image/png"===e.type;return n||f.ZP.error("You can only upload JPG/PNG file!"),n},We=(0,Z.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[Je?(0,Z.jsx)(S.Z,{}):(0,Z.jsx)(w.Z,{}),(0,Z.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,b.useEffect)((function(){q(""),V(""),ne(""),ae(""),be("0"),fe(""),ze(""),ue("1"),Ne("")}),[E]),(0,b.useEffect)((function(){ne("")}),[P]),(0,Z.jsxs)(p._z,{children:[(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",marginTop:30,marginBottom:30,justifyContent:"space-between"},children:[(0,Z.jsx)(x.ZP,{type:"primary",style:{},onClick:function(){return F(!0)},children:"新增Banner"},"primary"),(0,Z.jsxs)("div",{style:{display:"flex"},children:[(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center",width:400},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222"},children:"Banner名称："}),(0,Z.jsx)(y.Z,{placeholder:"Banner名称",style:{width:300},value:Ue.bannerName,onChange:function(e){return De(s()(s()({},Ue),{},{bannerName:e.target.value}))}})]}),(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222"},children:"语言："}),(0,Z.jsx)(h.Z,{style:{width:120},value:Ue.language,onChange:function(e){return De(s()(s()({},Ue),{},{language:e}))},options:[{label:"简体中文",value:"zh-CN"},{label:"西班牙语",value:"es"},{label:"英文",value:"en"},{label:"越南",value:"vi"},{label:"葡萄牙",value:"pt"},{label:"全部",value:""}]})]}),(0,Z.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:30},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222"},children:"位置："}),(0,Z.jsx)(h.Z,{style:{width:120},value:Ue.position,onChange:function(e){return De(s()(s()({},Ue),{},{position:e}))},options:[{label:"首页",value:"1"},{label:"充值页面",value:"2"},{label:"活动中心",value:"3"},{label:"全部",value:""}]})]}),(0,Z.jsx)(x.ZP,{type:"primary",style:{marginLeft:10},onClick:function(){return Ee(1)},children:"查询"},"primary")]})]}),(0,Z.jsx)(v.Z,{dataSource:a,scroll:{x:1700},columns:Fe,pagination:!1}),(0,Z.jsx)(m.Z,{total:null==C?void 0:C.total,style:{marginTop:10},pageSize:null==C?void 0:C.size,current:null==C?void 0:C.current,onChange:function(e){return Ee(e)}}),(0,Z.jsx)(g.Z,{title:"新增Banner",width:"1000px",open:E,onCancel:function(){return F(!1)},onOk:function(){return Re()},children:(0,Z.jsxs)("div",{style:{display:"flex"},children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"名称"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"名称",value:Y,onChange:function(e){return q(e.target.value)}})]})}),(0,Z.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"跳转类型"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:je,onChange:function(e){return be(e)},options:[{label:"新窗口",value:"0"},{label:"内部跳转",value:"1"}]})})]}),(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:20},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"是否启用"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:oe,onChange:function(e){return ue(e)},options:[{label:"启用",value:"1"},{label:"不启用",value:"0"}]})})]})]}),(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"跳转地址"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"跳转地址",value:pe,onChange:function(e){return fe(e.target.value)}})]})}),(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"app跳转地址"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"跳转地址",value:pe,onChange:function(e){return ve(e.target.value)}})]})}),(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"排序"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"排序",value:Ze,onChange:function(e){return ze(e.target.value)}})]})}),(0,Z.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"位置"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:ie,onChange:function(e){return ae(e)},options:[{label:"首页",value:"1"},{label:"充值页面",value:"2"},{label:"活动中心",value:"3"}]})})]}),(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:20},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"语言"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:ke,onChange:function(e){return Ne(e)},options:[{label:"简体中文",value:"zh-CN"},{label:"西班牙语",value:"es"},{label:"英文",value:"en"},{label:"越南",value:"vi"},{label:"葡萄牙",value:"pt"}]})})]})]})]}),(0,Z.jsx)("div",{style:{marginLeft:50},children:(0,Z.jsx)(j.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"/api/sys/upload/file",beforeUpload:He,data:{type:2},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(200==e.file.response.code?(V(e.file.response.data),Oe(!1),Ge(e.file.originFileObj,(function(e){ne(e)}))):f.ZP.error(e.file.response.msg)):Oe(!0)},headers:{Authorization:null===(e=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===e?void 0:e.token},children:ee?(0,Z.jsx)("img",{src:ee,alt:"file",style:{width:150,marginTop:50,height:180}}):We})})]})}),(0,Z.jsx)(g.Z,{title:"修改Banner",width:"1000px",open:P,onCancel:function(){return L(!1)},onOk:function(){return _e()},children:(0,Z.jsxs)("div",{style:{display:"flex"},children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"名称"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"名称",value:I.bannerName,onChange:function(e){return T(s()(s()({},I),{},{bannerName:e.target.value}))}})]})}),(0,Z.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"跳转类型"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:I.jumpType+"",onChange:function(e){return T(s()(s()({},I),{},{jumpType:e}))},options:[{label:"新窗口",value:"0"},{label:"内部跳转",value:"1"}]})})]}),(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:20},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"是否启用"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:I.status+"",onChange:function(e){return T(s()(s()({},I),{},{status:e}))},options:[{label:"启用",value:"1"},{label:"不启用",value:"0"}]})})]})]}),(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"跳转地址"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"跳转地址",value:I.jumpUrl,onChange:function(e){return T(s()(s()({},I),{},{jumpUrl:e.target.value}))}})]})}),(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"app跳转地址"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"跳转地址",value:I.appJumpUrl,onChange:function(e){return T(s()(s()({},I),{},{appJumpUrl:e.target.value}))}})]})}),(0,Z.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"排序"}),(0,Z.jsx)(y.Z,{style:{width:300},placeholder:"排序",value:I.sort,onChange:function(e){return T(s()(s()({},I),{},{sort:e.target.value}))}})]})}),(0,Z.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"位置"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:I.position+"",onChange:function(e){return T(s()(s()({},I),{},{position:e}))},options:[{label:"首页",value:"1"},{label:"充值页面",value:"2"},{label:"活动中心",value:"3"}]})})]}),(0,Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:20},children:[(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"语言"}),(0,Z.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,Z.jsx)(h.Z,{style:{width:120},value:I.language+"",onChange:function(e){return T(s()(s()({},I),{},{language:e}))},options:[{label:"简体中文",value:"zh-CN"},{label:"西班牙语",value:"es"},{label:"英文",value:"en"},{label:"越南",value:"vi"},{label:"葡萄牙",value:"pt"}]})})]})]})]}),(0,Z.jsx)("div",{style:{marginLeft:50},children:(0,Z.jsx)(j.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"/api/sys/upload/file",beforeUpload:He,data:{type:2},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(200==e.file.response.code?(T(s()(s()({},I),{},{bannerUrl:e.file.response.data})),Oe(!1),Ge(e.file.originFileObj,(function(e){ne(e)}))):f.ZP.error(e.file.response.msg)):Oe(!0)},headers:{Authorization:null===(n=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===n?void 0:n.token},children:ee||I.bannerUrl?(0,Z.jsx)("img",{src:ee||I.bannerUrl,alt:"file",style:{width:150,marginTop:50,height:180}}):We})})]})}),(0,Z.jsx)(g.Z,{title:"删除Banner",open:A,onCancel:function(){return G(!1)},onOk:function(){return Ae()},children:(0,Z.jsxs)("div",{children:["是否删除该Banner： ",(0,Z.jsx)("span",{style:{fontWeight:"bold"},children:null==I?void 0:I.bannerName})]})})]})}},40190:function(){}}]);