"use strict";(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[2386],{97682:function(e,t,n){n.r(t);var l=n(15009),i=n.n(l),s=n(97857),r=n.n(s),a=n(99289),o=n.n(a),c=n(5574),d=n.n(c),u=n(2618),f=n(90930),x=n(2453),p=n(83622),g=n(34041),h=n(4930),y=n(78818),v=n(24426),m=n(55102),j=n(19151),w=n(67294),S=n(79090),Z=n(51042),C=(n(40190),n(85893));t.default=function(){var e,t,n,l;(0,w.useEffect)((function(){Ke(1),Qe()}),[]);var s=(0,w.useState)([]),a=d()(s,2),c=a[0],b=a[1],k=(0,w.useState)({}),z=d()(k,2),T=z[0],I=z[1],B=(0,w.useState)({}),P=d()(B,2),D=P[0],L=P[1],N=(0,w.useState)(!1),U=d()(N,2),O=U[0],F=U[1],A=(0,w.useState)(!1),E=d()(A,2),J=E[0],R=E[1],_=(0,w.useState)(!1),M=d()(_,2),W=M[0],q=M[1],G=(0,w.useState)(""),H=d()(G,2),K=H[0],Q=H[1],V=(0,w.useState)(""),X=d()(V,2),Y=X[0],$=X[1],ee=(0,w.useState)(""),te=d()(ee,2),ne=te[0],le=te[1],ie=(0,w.useState)(""),se=d()(ie,2),re=se[0],ae=se[1],oe=(0,w.useState)(""),ce=d()(oe,2),de=ce[0],ue=ce[1],fe=(0,w.useState)(""),xe=d()(fe,2),pe=xe[0],ge=xe[1],he=(0,w.useState)(""),ye=d()(he,2),ve=ye[0],me=ye[1],je=(0,w.useState)(""),we=d()(je,2),Se=we[0],Ze=we[1],Ce=(0,w.useState)([]),be=d()(Ce,2),ke=be[0],ze=be[1],Te=(0,w.useState)("0"),Ie=d()(Te,2),Be=Ie[0],Pe=Ie[1],De=(0,w.useState)(""),Le=d()(De,2),Ne=Le[0],Ue=Le[1],Oe=(0,w.useState)(""),Fe=d()(Oe,2),Ae=Fe[0],Ee=Fe[1],Je=(0,w.useState)({language:"",collegeTypeId:"",status:""}),Re=d()(Je,2),_e=Re[0],Me=Re[1],We=(0,w.useState)(!1),qe=d()(We,2),Ge=qe[0],He=qe[1],Ke=function(){var e=o()(i()().mark((function e(t){var n,l;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r()({pageNum:t,pageSize:10},_e),e.next=3,(0,u.aJ)(n);case 3:200==(l=e.sent).code&&(b(l.data.records),I(l.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.TE)();case 2:200==(t=e.sent).code&&(n=[{label:"全部",value:""}],t.data.map((function(e){n.push({label:e.typeName,value:e.id})})),ze(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ve=[{title:"学院ID",dataIndex:"id",key:"id"},{title:"语言",dataIndex:"language",key:"language",render:function(e,t){return(0,C.jsx)("div",{children:"en"==t.language?"英文":"zh-CN"==t.language?"简体中文":"vi"==t.language?"越南":"pt"==t.language?"葡萄牙":"es"==t.language?"西班牙":null})}},{title:"学院类型",dataIndex:"collegeTypeName",key:"collegeTypeName"},{title:"图片/视频",dataIndex:"flag",key:"flag",render:function(e,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{children:0==t.flag?"图片":"视频"})})}},{title:"学院内容",dataIndex:"content",key:"content",render:function(e,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)("div",{children:[t.content.substring(0,30),"..."]})})}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("div",{children:0==t.status?"下架":"上架"})})}},{title:"发布时间",dataIndex:"createTime",key:"createTime",sorter:function(e,t){return new Date(e.createTime).getTime()-new Date(t.createTime).getTime()}},{title:"浏览量",dataIndex:"viewCount",key:"viewCount"},{title:"操作",dataIndex:"action",key:"action",render:function(e,t){return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("a",{style:{marginRight:10},onClick:function(){L(t),F(!0)},children:"修改"}),(0,C.jsx)("a",{style:{marginRight:10},onClick:function(){L(t),q(!0)},children:"删除"}),(0,C.jsx)("a",{onClick:function(){nt(t.id,0==t.status?1:0)},style:{marginLeft:10},children:0==t.status?"上架":"下架"})]})}}],Xe=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r()({},D),e.next=3,(0,u.Rl)(t);case 3:200==(n=e.sent).code?(x.ZP.success("修改成功"),F(!1),Ke(1)):x.ZP.error(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ye=function(){var e=o()(i()().mark((function e(){var t;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.dl)(null==D?void 0:D.id);case 2:200==(t=e.sent).code?(x.ZP.success("删除成功"),Ke(1),q(!1)):x.ZP.error(t.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$e=function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)},et=function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||x.ZP.error("只能上传jpg/png图片"),t},tt=(0,C.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[Ge?(0,C.jsx)(S.Z,{}):(0,C.jsx)(Z.Z,{}),(0,C.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),nt=function(){var e=o()(i()().mark((function e(t,n){var l,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={id:t,status:n},e.next=3,(0,u.iM)(l);case 3:200==(s=e.sent).code?(x.ZP.success("更新成功"),Ke(1)):x.ZP.error(s.msg);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,w.useEffect)((function(){Q(""),$(""),ae(""),ue(""),ge(""),me(""),Ze(""),Ue(""),Ee(""),Pe("0")}),[J]),(0,w.useEffect)((function(){$(""),le("")}),[O]);var lt=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:K,collegeTypeId:re,content:ve,contentUrl:Ne,coverImageUrl:Ae,language:pe,viewCount:Se,sort:de,flag:Be},e.next=3,(0,u.Pw)(t);case 3:200==(n=e.sent).code?(R(!1),x.ZP.success("新增成功"),Ke(1)):x.ZP.error(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,C.jsxs)(f._z,{children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"flex-end",marginTop:30,marginBottom:30,justifyContent:"space-between"},children:[(0,C.jsx)(p.ZP,{type:"primary",style:{},onClick:function(){return R(!0)},children:"内容发布"},"primary"),(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222"},children:"语言："}),(0,C.jsx)(g.Z,{style:{width:120},value:_e.language,onChange:function(e){return Me(r()(r()({},_e),{},{language:e}))},options:[{label:"简体中文",value:"zh-CN"},{label:"西班牙语",value:"es"},{label:"英文",value:"en"},{label:"越南",value:"vi"},{label:"葡萄牙",value:"pt"},{label:"全部",value:""}]})]}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:30},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222"},children:"发布类型："}),(0,C.jsx)(g.Z,{style:{width:120},value:_e.collegeTypeId,onChange:function(e){return Me(r()(r()({},_e),{},{collegeTypeId:e}))},options:ke})]}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",marginLeft:30},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222"},children:"状态："}),(0,C.jsx)(g.Z,{style:{width:120},value:_e.status,onChange:function(e){return Me(r()(r()({},_e),{},{status:e}))},options:[{label:"上架",value:"1"},{label:"下架",value:"0"},{label:"全部",value:""}]})]}),(0,C.jsx)(p.ZP,{type:"primary",style:{marginLeft:10},onClick:function(){return Ke(1)},children:"查询"},"primary"),(0,C.jsx)(p.ZP,{type:"primary",style:{marginLeft:10},onClick:function(){Me({language:"",status:"",collegeTypeId:""})},children:"重置"},"primary")]})]}),(0,C.jsx)(h.Z,{dataSource:c,scroll:{x:1700},columns:Ve,pagination:!1}),(0,C.jsx)(y.Z,{total:null==T?void 0:T.total,style:{marginTop:10},pageSize:null==T?void 0:T.size,current:null==T?void 0:T.current,onChange:function(e){return Ke(e)}}),(0,C.jsx)(v.Z,{title:"新增内容",width:"1000px",open:J,onCancel:function(){return R(!1)},onOk:function(){return lt()},children:(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"标题"}),(0,C.jsx)(m.Z,{style:{width:300},placeholder:"名称",value:K,onChange:function(e){return Q(e.target.value)}})]})}),(0,C.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"图片/视频"}),(0,C.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,C.jsx)(g.Z,{style:{width:120},value:Be,onChange:function(e){return Pe(e)},options:[{label:"图片",value:"0"},{label:"视频",value:"1"}]})})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:20},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"学院类型"}),(0,C.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,C.jsx)(g.Z,{style:{width:120},value:re,onChange:function(e){return ae(e)},options:ke.slice(1,ke.length)})})]})]}),0==Be?(0,C.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"学院内容"}),(0,C.jsx)(m.Z.TextArea,{style:{width:300},placeholder:"内容",value:ve,onChange:function(e){return me(e.target.value)}})]})}):null,(0,C.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"浏览量"}),(0,C.jsx)(m.Z,{style:{width:300},placeholder:"浏览量",value:Se,onChange:function(e){return Ze(e.target.value)}})]})}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"语言"}),(0,C.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,C.jsx)(g.Z,{style:{width:120},value:pe,onChange:function(e){return ge(e)},options:[{label:"简体中文",value:"zh-CN"},{label:"西班牙语",value:"es"},{label:"英文",value:"en"},{label:"越南",value:"vi"},{label:"葡萄牙",value:"pt"}]})})]})]}),(0,C.jsxs)("div",{style:{marginLeft:50},children:["封面图片：（不支持视频）",(0,C.jsx)(j.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"/api/sys/upload/file",beforeUpload:et,data:{type:3},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(200==e.file.response.code?(Ee(e.file.response.data),He(!1),$e(e.file.originFileObj,(function(e){$(e)})),x.ZP.success("上传成功")):x.ZP.error(e.file.response.msg)):He(!0)},headers:{Authorization:null===(e=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===e?void 0:e.token},children:Ae?(0,C.jsx)("img",{src:Y,alt:"file",style:{width:150,marginTop:50,height:180}}):tt}),(0,C.jsx)("div",{style:{marginTop:10},children:"内容图片/视频："}),(0,C.jsx)(j.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"/api/sys/upload/file",data:{type:3},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(200==e.file.response.code?(Ue(e.file.response.data),He(!1),$e(e.file.originFileObj,(function(e){le(e)})),x.ZP.success("上传成功")):x.ZP.error(e.file.response.msg)):He(!0)},headers:{Authorization:null===(t=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===t?void 0:t.token},children:Ne?(0,C.jsx)("img",{src:ne,alt:"file",style:{width:150,marginTop:50,height:180}}):tt})]})]})}),(0,C.jsx)(v.Z,{title:"修改内容",width:"1000px",open:O,onCancel:function(){return F(!1)},onOk:function(){return Xe()},children:(0,C.jsxs)("div",{style:{display:"flex"},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"标题"}),(0,C.jsx)(m.Z,{style:{width:300},placeholder:"标题",value:D.title,onChange:function(e){return L(r()(r()({},D),{},{title:e.target.value}))}})]})}),(0,C.jsxs)("div",{style:{display:"flex",marginBottom:10},children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"图片/视频"}),(0,C.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,C.jsx)(g.Z,{style:{width:120},value:D.flag+"",onChange:function(e){return L(r()(r()({},D),{},{flag:e}))},options:[{label:"图片",value:"0"},{label:"视频",value:"1"}]})})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:20},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"学院类型"}),(0,C.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,C.jsx)(g.Z,{style:{width:120},value:D.collegeTypeName,onChange:function(e){return L(r()(r()({},D),{},{collegeTypeId:e}))},options:ke.slice(1,ke.length)})})]})]}),0==D.flag?(0,C.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"学院内容"}),(0,C.jsx)(m.Z.TextArea,{style:{width:300},placeholder:"内容",value:D.content,onChange:function(e){return L(r()(r()({},D),{},{content:e.target.value}))}})]})}):null,(0,C.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"浏览量"}),(0,C.jsx)(m.Z,{style:{width:300},placeholder:"浏览量",value:D.viewCount,onChange:function(e){return L(r()(r()({},D),{},{viewCount:e.target.value}))}})]})}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"语言"}),(0,C.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,C.jsx)(g.Z,{style:{width:120},value:D.language,onChange:function(e){return L(r()(r()({},D),{},{language:e}))},options:[{label:"简体中文",value:"zh-CN"},{label:"西班牙语",value:"es"},{label:"英文",value:"en"},{label:"越南",value:"vi"},{label:"葡萄牙",value:"pt"}]})})]})]}),(0,C.jsxs)("div",{style:{marginLeft:50},children:["封面图片：（不支持视频）",(0,C.jsx)(j.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"/api/sys/upload/file",beforeUpload:et,data:{type:3},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(200==e.file.response.code?(L(r()(r()({},D),{},{coverImageUrl:e.file.response.data})),He(!1),$e(e.file.originFileObj,(function(e){$(e)})),x.ZP.success("上传成功")):x.ZP.error(e.file.response.msg)):He(!0)},headers:{Authorization:null===(n=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===n?void 0:n.token},children:Y?(0,C.jsx)("img",{src:Y,alt:"file",style:{width:150,marginTop:50,height:180}}):tt}),(0,C.jsx)("div",{style:{marginTop:10},children:"内容图片/视频："}),(0,C.jsx)(j.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"/api/sys/upload/file",data:{type:3},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(200==e.file.response.code?(L(r()(r()({},D),{},{contentUrl:e.file.response.data})),He(!1),$e(e.file.originFileObj,(function(e){le(e)})),x.ZP.success("上传成功")):x.ZP.error(e.file.response.msg)):He(!0)},headers:{Authorization:null===(l=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===l?void 0:l.token},children:ne?(0,C.jsx)("img",{src:ne,alt:"file",style:{width:150,marginTop:50,height:180}}):tt})]})]})}),(0,C.jsx)(v.Z,{title:"删除学院",open:W,onCancel:function(){return q(!1)},onOk:function(){return Ye()},children:(0,C.jsxs)("div",{children:["是否删除该学院内容： ",(0,C.jsx)("span",{style:{fontWeight:"bold"},children:null==D?void 0:D.content})]})})]})}},40190:function(){}}]);