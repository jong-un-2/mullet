"use strict";(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[2827],{61053:function(e,t,n){n.r(t);var a=n(15009),i=n.n(a),l=n(99289),o=n.n(l),r=n(97857),s=n.n(r),u=n(5574),c=n.n(u),d=n(2618),m=n(90930),p=n(2453),h=n(83622),v=n(4930),f=n(78818),g=n(24426),x=n(55102),y=n(34041),S=n(59847),j=n(67294),w=(n(40190),n(85893)),k=[{path:"/welcome",name:"欢迎",component:"./Welcome",id:1},{path:"/product",name:"质押管理",pid:null,id:2,routes:[{path:"/product/list",pid:2,name:"质押产品列表",component:"./Product/list",id:"2-1"},{path:"/product/order",pid:2,name:"订单列表",component:"./Product/order",id:"2-2"}]},{path:"/userManage",name:"用户管理",pid:null,id:3,routes:[{path:"/userManage/list",pid:3,name:"用户列表",component:"./userManage/list",id:"3-1"},{path:"/userManage/group",pid:3,name:"用户组别管理",component:"./userManage/group",id:"3-2"},{path:"/userManage/statistics",pid:3,name:"推广统计",component:"./userManage/statistics",id:"3-5"}]},{path:"/adminUser",name:"后台管理",pid:null,id:4,routes:[{path:"/adminUser/index",pid:4,name:"后台用户管理",id:"4-1",component:"./adminUser/index"},{path:"/adminUser/role",pid:4,name:"权限角色管理",id:"4-2",component:"./adminUser/role"}]},{path:"/agent",name:"代理管理",pid:null,id:5,routes:[{path:"/agent/list",pid:5,name:"客户结算（按代理）",component:"./agent/list",id:"5-1"},{path:"/agent/customerSettlement",pid:5,name:"客户结算（按每笔）",component:"./agent/customerSettlement",id:"5-2"},{path:"/agent/setting",pid:5,name:"佣金设置",component:"./agent/setting",id:"5-3"}]},{path:"/commission",name:"佣金费用",pid:null,id:6,routes:[{path:"/commission/overview",pid:6,name:"费用总览",component:"./commission/overview",id:"6-1"},{path:"/commission/records",pid:6,name:"费用记录",component:"./commission/records",id:"6-2"},{path:"/commission/settings",pid:6,name:"费率设置",component:"./commission/settings",id:"6-3"},{path:"/commission/statistics",pid:6,name:"费用统计",component:"./commission/statistics",id:"6-4"}]},{path:"/wallet",name:"钱包管理",id:7,component:"./Wallet/list"},{path:"/inManaged",name:"入金管理",id:8,component:"./payManage/list"},{path:"/outManaged",name:"出金管理",id:9,component:"./outManage/list"},{path:"/orderRecord",name:"入金补单记录",id:10,component:"./orderRecord/list"},{path:"/settlement",name:"结算出入金管理",id:11,component:"./settlement/list"},{path:"/financialStatements",name:"资金流水报表",id:12,component:"./financialStatements/"},{path:"/fundSettlement",name:"资金结算报表",component:"./fundSettlement/"},{path:"/releaseFunds",name:"资金释放报表",id:13,component:"./releaseFunds/"},{path:"/active",name:"活动管理",id:14,pid:null,routes:[{path:"/active/",pid:14,name:"首充活动",component:"./active/"},{path:"/active/tg",pid:14,name:"TG赠金发放",component:"./active/tg"}]},{path:"/banner",name:"Banner管理",id:15,component:"./banner/"},{path:"/college",name:"学院管理",routes:[{path:"/college/",name:"内容管理",component:"./college/"},{path:"/college/type",name:"类型管理",component:"./college/type"}],id:16},{path:"/msgManage",name:"短信管理",routes:[{path:"/msgManage/",name:"短信内容管理",component:"./msgManage/"},{path:"/msgManage/type",name:"短信类型管理",component:"./msgManage/type"},{path:"/msgManage/msgChannel",name:"短信通道管理",component:"./msgManage/msgChannel"}],id:17},{path:"/notice",name:"公告管理",id:18,component:"./notice/"},{path:"/tgGroup",name:"TG群管理",id:19,component:"./tgGroup/"},{path:"/",redirect:"/welcome",id:20},{path:"*",layout:!1,component:"./404"}],C=[{value:"欢迎",title:"欢迎"},{value:"质押管理",title:"质押管理",children:[{value:"质押产品列表",title:"质押产品列表"},{value:"订单列表",title:"订单列表"}]},{value:"用户管理",title:"用户管理",children:[{value:"用户列表",title:"用户列表"},{value:"用户组别管理",title:"用户组别管理"},{value:"推广统计",title:"推广统计"}]},{value:"后台管理",title:"后台管理",children:[{value:"后台用户管理",title:"后台用户管理"},{value:"权限角色管理",title:"权限角色管理"}]},{value:"代理管理",title:"代理管理",children:[{value:"客户结算（按代理）",title:"客户结算（按代理）"},{value:"客户结算（按每笔）",title:"客户结算（按每笔）"},{value:"佣金设置",title:"佣金设置"}]},{value:"佣金费用",title:"佣金费用",children:[{value:"费用总览",title:"费用总览"},{value:"费用记录",title:"费用记录"},{value:"费率设置",title:"费率设置"},{value:"费用统计",title:"费用统计"}]},{value:"钱包管理",title:"钱包管理"},{value:"入金管理",title:"入金管理"},{value:"入金补单记录",title:"入金补单记录"},{value:"出金管理",title:"出金管理"},{value:"结算出入金管理",title:"结算出入金管理"},{value:"资金流水报表",title:"资金流水报表"},{value:"资金结算报表",title:"资金结算报表"},{value:"资金释放报表",title:"资金释放报表"},{value:"活动管理",title:"活动管理",children:[{value:"首充活动",title:"首充活动"},{value:"TG赠金发放",title:"TG赠金发放"}]},{value:"Banner管理",title:"Banner管理"},{value:"学院管理",title:"学院管理",children:[{value:"内容管理",title:"内容管理"},{value:"类型管理",title:"类型管理"}]},{value:"短信管理",title:"短信管理",children:[{value:"短信内容管理",title:"短信内容管理"},{value:"短信类型管理",title:"短信类型管理"},{value:"短信通道管理",title:"短信通道管理"}]},{value:"公告管理",title:"公告管理"},{value:"TG群管理",title:"TG群管理"}];function M(e,t){var n=[];return function t(a){a&&Array.isArray(a)&&a.forEach((function(a){if(a.routes){var i=function(e,t){var n=e.find((function(e){return e.value===t}));return n&&n.children?n.children.map((function(e){return e.value})):[]}(e,a.name);i.length>0&&function(e,t){return t.every((function(t){return e.includes(t.name)}))}(i,a.routes)?(n.push(a.name),a.routes.forEach((function(e){return n.push(e.name)}))):t(a.routes)}else n.push(a.name)}))}(t),n}t.default=function(e){(0,j.useEffect)((function(){de(1)}),[]);var t=(0,j.useState)([]),n=c()(t,2),a=n[0],l=n[1],r=(0,j.useState)([]),u=c()(r,2),Z=u[0],B=u[1],z=(0,j.useState)([]),P=c()(z,2),T=P[0],D=P[1],b=(0,j.useState)(""),N=c()(b,2),E=N[0],G=N[1],A=(0,j.useState)("0"),I=c()(A,2),R=I[0],_=I[1],U=(0,j.useState)({}),H=c()(U,2),O=H[0],W=H[1],F=(0,j.useState)({}),J=c()(F,2),K=J[0],q=J[1],L=(0,j.useState)(!1),Q=c()(L,2),V=Q[0],X=Q[1],Y=(0,j.useState)(!1),$=c()(Y,2),ee=$[0],te=$[1],ne=(0,j.useState)([]),ae=c()(ne,2),ie=ae[0],le=ae[1],oe=(0,j.useState)([]),re=c()(oe,2),se=re[0],ue=re[1],ce=function e(t,n){return t.map((function(t){if(t.routes){var a=e(t.routes,n);if(a.length)return s()(s()({},t),{},{routes:a})}return n.includes(t.name)?t:null})).filter(Boolean)},de=function(){var e=o()(i()().mark((function e(t){var n,a,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={pageNum:t,pageSize:10},e.next=3,(0,d.DA)(n);case 3:200==(a=e.sent).code&&(o=a.data.records.map((function(e){return s()(s()({},e),{},{status:0==e.status?"启用":"停用"})})),l(o),W(a.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=o()(i()().mark((function e(t){var n,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d._u)(t);case 2:200==(n=e.sent).code?(q(n.data),a=M(k,n.data.routes),ue(a),X(!0)):p.ZP.error(n.msg);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=[{title:"角色名称",dataIndex:"roleName",key:"roleName"},{title:"权限分配人数",dataIndex:"count",key:"count"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"是否启用",dataIndex:"status",key:"status"},{title:"操作",dataIndex:"action",key:"action",render:function(e,t){return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("a",{style:{marginRight:10},onClick:function(){me(t.id)},children:"修改"}),(0,w.jsxs)("a",{style:{marginRight:10},onClick:function(){fe(t)},children:[" ","停用"==t.status?"启用":"停用"]})]})}}],he=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={roleName:E,status:R,routes:Z},e.next=3,(0,d.l1)(t);case 3:200==(n=e.sent).code?(te(!1),de(1),p.ZP.success("新增成功")):p.ZP.error(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:K.id,roleName:K.roleName,status:K.status,routes:T},e.next=3,(0,d.Sm)(t);case 3:200==(n=e.sent).code?(p.ZP.success("修改成功"),X(!1),de(1)):p.ZP.error(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=o()(i()().mark((function e(t){var n,a,l;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="停用"==t.status?0:"启用"==t.status?1:t.status,a={id:t.id,status:n},e.next=4,(0,d.JK)(a);case 4:200==(l=e.sent).code?(p.ZP.success("操作成功"),X(!1),de(1)):p.ZP.error(l.msg);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.useEffect)((function(){G(""),_("0"),le([])}),[ee]),(0,w.jsxs)(m._z,{children:[(0,w.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,w.jsx)(h.ZP,{type:"primary",style:{marginTop:30,marginBottom:30},onClick:function(){te(!0)},children:"新增角色"},"primary")}),(0,w.jsx)(v.Z,{dataSource:a,columns:pe,pagination:!1}),(0,w.jsx)(f.Z,{total:null==O?void 0:O.total,style:{marginTop:10},pageSize:null==O?void 0:O.size,current:null==O?void 0:O.current,onChange:function(e){return de(e)}}),(0,w.jsxs)(g.Z,{title:"新增角色",open:ee,onCancel:function(){return te(!1)},onOk:function(){return he()},children:[(0,w.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"角色名称"}),(0,w.jsx)(x.Z,{style:{width:300},placeholder:"角色名称",value:E,onChange:function(e){return G(e.target.value)}})]})}),(0,w.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"是否启用"}),(0,w.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,w.jsx)(y.Z,{style:{width:120},value:R+"",onChange:function(e){return _(e)},options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]})})]})}),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"权限菜单"}),(0,w.jsx)(S.Z,{showSearch:!0,style:{width:"100%"},value:ie,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择菜单",allowClear:!0,treeCheckable:!0,multiple:!0,showCheckedStrategy:"SHOW_PARENT",treeDefaultExpandAll:!0,onChange:function(e){le(e);var t=ce(k,e);B(t)},treeData:C})]})]}),(0,w.jsxs)(g.Z,{title:"修改用户",open:V,onCancel:function(){return X(!1)},onOk:function(){return ve()},children:[(0,w.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"角色名称"}),(0,w.jsx)(x.Z,{style:{width:300},placeholder:"角色名称",value:K.roleName,onChange:function(e){return q(s()(s()({},K),{},{roleName:e.target.value}))}})]})}),(0,w.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"是否启用"}),(0,w.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,w.jsx)(y.Z,{style:{width:120},value:K.status+"",onChange:function(e){return q(s()(s()({},K),{},{status:e}))},options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]})})]})}),(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,w.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"权限菜单"}),(0,w.jsx)(S.Z,{showSearch:!0,style:{width:"100%"},value:se,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择菜单",allowClear:!0,treeCheckable:!0,multiple:!0,showCheckedStrategy:"SHOW_PARENT",treeDefaultExpandAll:!0,onChange:function(e){ue(e);var t=ce(k,e);D(t)},treeData:C})]})]})]})}},40190:function(){}}]);