(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[1605],{9087:function(e,t,n){"use strict";n.r(t);var a=n(15009),o=n.n(a),i=n(97857),r=n.n(i),l=n(99289),s=n.n(l),d=n(5574),c=n.n(d),u=n(90930),f=n(67294),p=n(79090),m=n(51042),x=n(93162),v=n.n(x),h=n(2453),y=n(34041),g=n(55102),j=n(83622),b=n(98142),w=n(4930),S=n(78818),k=n(24426),B=n(95715),T=n(19151),I=n(2618),C=n(85893);t.default=function(){var e,t;(0,f.useEffect)((function(){he(1),ye()}),[]);var n=(0,f.useState)([]),a=c()(n,2),i=a[0],l=a[1],d=(0,f.useState)({trcNet:"",orderId:"",status:"0",fromWalletAddress:"",inWalletAddress:"",email:"",hashId:"",type:"",startTime:"",endTime:""}),x=c()(d,2),Z=x[0],A=x[1],D=(0,f.useState)({}),z=c()(D,2),L=z[0],R=z[1],N=(0,f.useState)({}),U=c()(N,2),E=U[0],O=U[1],W=(0,f.useState)({}),H=c()(W,2),M=H[0],P=H[1],_=(0,f.useState)(""),F=c()(_,2),q=F[0],G=F[1],J=(0,f.useState)(!1),V=c()(J,2),X=V[0],K=V[1],$=(0,f.useState)(""),Y=c()($,2),Q=Y[0],ee=Y[1],te=(0,f.useState)(""),ne=c()(te,2),ae=ne[0],oe=ne[1],ie=(0,f.useState)(""),re=c()(ie,2),le=re[0],se=re[1],de=(0,f.useState)(!1),ce=c()(de,2),ue=ce[0],fe=ce[1],pe=(0,f.useState)(0),me=c()(pe,2),xe=me[0],ve=me[1],he=function(){var e=s()(o()().mark((function e(t){var n,a,i;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r()({pageNum:t,pageSize:10},Z),e.next=3,(0,I.a$)(n);case 3:200==(a=e.sent).code&&(i=a.data.records.map((function(e){return r()(r()({},e),{},{type:0==e.type?"USDT":1==e.type?"SOL":"BTC",status:0==e.status?"已完成":1==e.status?"挂帐":2==e.status?"超时":"待支付",trcNet:0==e.trcNet?"TRC20":1==e.trcNet?"SOLANA":"BTC"})})),l(i),R(a.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=s()(o()().mark((function e(){var t,n,a;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r()({},Z),e.next=3,(0,I.J3)(t);case 3:200==(n=e.sent).code&&ve(null===(a=n.data)||void 0===a?void 0:a.totalAmount);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=(0,C.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[X?(0,C.jsx)(p.Z,{}):(0,C.jsx)(m.Z,{}),(0,C.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),je=function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)},be=[{title:"订单号",dataIndex:"orderId",key:"orderId"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"用户账号",dataIndex:"email",key:"email"},{title:"收款钱包昵称",dataIndex:"inWalletName",key:"inWalletName"},{title:"收款钱包地址",dataIndex:"inWalletAddress",key:"inWalletAddress"},{title:"主网名称",dataIndex:"trcNet",key:"trcNet"},{title:"订单Hash",dataIndex:"hashId",key:"hashId"},{title:"入金数量",dataIndex:"money",key:"money"},{title:"转入币种",dataIndex:"type",key:"type"},{title:"订单状态",dataIndex:"status",key:"status"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"action",key:"action",render:function(e,t){return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)("a",{onClick:function(){fe(!0),O(t),ke(t.id)},children:"挂帐"==t.status?"创建补单":"查看"})})}}],we=function(){var e=s()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.Xd)(Z);case 2:t=e.sent,n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),v().saveAs(n,"data.xlsx");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=s()(o()().mark((function e(){var t,n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("挂帐"==E.status){e.next=3;break}return fe(!1),e.abrupt("return");case 3:return t={id:E.id,email:q,remark:Q,credentialsUrl:[le]},e.next=6,(0,I.R$)(t);case 6:200==(n=e.sent).code?(h.ZP.success("提交成功"),fe(!1),he(1)):h.ZP.error(n.msg);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=s()(o()().mark((function e(t){var n;return o()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.K8)(t);case 2:200==(n=e.sent).code&&P(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,C.jsxs)(u._z,{children:[(0,C.jsxs)("div",{style:{display:"flex",marginBottom:20,justifyContent:"space-between",alignItems:"flex-end"},children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"入金主网"}),(0,C.jsx)(y.Z,{defaultValue:"全部",style:{width:120},value:Z.trcNet,onChange:function(e){return A(r()(r()({},Z),{},{trcNet:e}))},options:[{value:"0",label:"TRC20"},{value:"1",label:"Solana"},{value:"2",label:"BTC"},{value:"",label:"全部"}]})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"入金单号"}),(0,C.jsx)(g.Z,{placeholder:"入金单号",value:Z.orderId,onChange:function(e){return A(r()(r()({},Z),{},{orderId:e.target.value}))}})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"用户账号"}),(0,C.jsx)(g.Z,{placeholder:"用户账号",value:Z.email,onChange:function(e){return A(r()(r()({},Z),{},{email:e.target.value}))}})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"收款钱包地址"}),(0,C.jsx)(g.Z,{placeholder:"请输入钱包地址",value:Z.inWalletAddress,onChange:function(e){return A(r()(r()({},Z),{},{inWalletAddress:e.target.value}))}})]}),(0,C.jsx)(j.ZP,{type:"primary",onClick:function(){he(1),ye()},children:"查询"},"primary")]}),(0,C.jsxs)("div",{style:{display:"flex",marginBottom:20,alignItems:"flex-end",justifyContent:"space-between"},children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"订单Hash"}),(0,C.jsx)(g.Z,{placeholder:"订单Hash",value:Z.hashId,onChange:function(e){return A(r()(r()({},Z),{},{hashId:e.target.value}))}})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"入金币种"}),(0,C.jsx)(y.Z,{defaultValue:"全部",style:{width:120},value:Z.type,onChange:function(e){return A(r()(r()({},Z),{},{type:e}))},options:[{value:"0",label:"USDT"},{value:"1",label:"SOL"},{value:"2",label:"BTC"},{value:"",label:"全部"}]})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"订单状态"}),(0,C.jsx)(y.Z,{defaultValue:"全部",value:Z.status,style:{width:120},onChange:function(e){return A(r()(r()({},Z),{},{status:e}))},options:[{value:"0",label:"已完成"},{value:"1",label:"挂账"},{value:"2",label:"超时"},{value:"3",label:"待支付"},{value:"",label:"全部"}]})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"创建时间"}),(0,C.jsx)(b.default,{onChange:function(e,t){return A(r()(r()({},Z),{},{startTime:t}))},placeholder:"开始时间",name:"date"})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"结束时间"}),(0,C.jsx)(b.default,{onChange:function(e,t){return A(r()(r()({},Z),{},{endTime:t}))},placeholder:"结束时间",name:"date"})]}),(0,C.jsx)(j.ZP,{type:"primary",onClick:function(){A({trcNet:"",orderId:"",status:"",fromWalletAddress:"",inWalletAddress:"",email:"",hashId:"",type:"",startTime:"",endTime:""})},children:"重置"},"primary"),(0,C.jsx)(j.ZP,{type:"primary",onClick:we,children:"导出表格"},"primary")]}),(0,C.jsxs)("div",{style:{fontSize:20,fontWeight:"bold",marginBottom:30,marginTop:30},children:["入金总资金：",xe," USDT"]}),(0,C.jsx)(w.Z,{dataSource:i,scroll:{x:3e3},columns:be,pagination:!1}),(0,C.jsx)(S.Z,{total:null==L?void 0:L.total,style:{marginTop:10},pageSize:null==L?void 0:L.size,current:null==L?void 0:L.current,onChange:function(e){return he(e)}}),(0,C.jsxs)(k.Z,{title:"挂帐"==E.status?"用户补单":"订单详情",width:"800px",height:"auto",open:ue,onCancel:function(){fe(!1),oe(""),se("")},onOk:Se,children:[(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"入金单号"}),(0,C.jsx)(g.Z,{placeholder:"入金单号",value:E.orderId,disabled:!0})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转入主网"}),(0,C.jsx)(g.Z,{placeholder:"转入主网",value:E.trcNet,disabled:!0})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转入币种"}),(0,C.jsx)(g.Z,{placeholder:"转入币种",value:E.type,disabled:!0})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转入金额"}),(0,C.jsx)(g.Z,{placeholder:"转入金额",value:M.money,disabled:!0})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"关联入金用户"}),(0,C.jsx)(g.Z,{placeholder:"关联入金用户",disabled:"挂帐"!=E.status,value:"挂帐"==E.status?q:E.email,onChange:function(e){return G(e.target.value)}})]}),(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,C.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"补单备注"}),(0,C.jsx)(g.Z,{placeholder:"请输入备注",disabled:"挂帐"!=E.status,value:"挂帐"==E.status?Q:E.remark,onChange:function(e){return ee(e.target.value)}})]}),null==M||null===(e=M.urls)||void 0===e?void 0:e.map((function(e,t){return(0,C.jsx)(B.Z,{width:200,src:e},t+"aooqpwe")})),"挂帐"==E.status?(0,C.jsx)(T.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/sys/upload/file",beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||h.ZP.error("You can only upload JPG/PNG file!"),t},data:{type:0},onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(je(e.file.originFileObj,(function(e){K(!1),oe(e)})),200==e.file.response.code&&se(e.file.response.data)):K(!0)},headers:{Authorization:null===(t=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===t?void 0:t.token},children:ae?(0,C.jsx)("img",{src:ae,alt:"file",style:{width:150,marginTop:50,height:180}}):ge}):null]})]})}},93162:function(e,t,n){var a,o,i;o=[],void 0===(i="function"==typeof(a=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function a(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){s(a.response,t,n)},a.onerror=function(){console.error("could not download file")},a.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(e,t,n){var l=r.URL||r.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?i(s):o(s.href)?a(e,t,n):i(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(s.href)}),4e4),setTimeout((function(){i(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,r){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,r),n);else if(o(e))a(e,n,r);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){i(l)}))}}:function(e,t,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return a(e,t,n);var i="application/octet-stream"===e.type,s=/constructor/i.test(r.HTMLElement)||r.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||i&&s||l)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},c.readAsDataURL(e)}else{var u=r.URL||r.webkitURL,f=u.createObjectURL(e);o?o.location=f:location.href=f,o=null,setTimeout((function(){u.revokeObjectURL(f)}),4e4)}});r.saveAs=s.saveAs=s,e.exports=s})?a.apply(t,o):a)||(e.exports=i)}}]);