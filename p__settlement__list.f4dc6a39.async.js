(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[8375],{74589:function(e,t,n){"use strict";n.r(t);var r=n(15009),i=n.n(r),l=n(97857),a=n.n(l),o=n(99289),s=n.n(o),d=n(5574),c=n.n(d),u=n(90930),f=n(67294),m=n(79090),x=n(51042),p=n(93162),y=n.n(p),v=n(2453),h=n(34041),g=n(55102),j=n(83622),b=n(98142),S=n(4930),w=n(78818),B=n(24426),k=n(78045),T=n(19151),C=n(95715),Z=n(2618),A=n(85893);t.default=function(){var e;(0,f.useEffect)((function(){ke(1),Te()}),[]);var t=(0,f.useState)([]),n=c()(t,2),r=n[0],l=n[1],o=(0,f.useState)({trcNet:"",fromWalletAddress:"",hashId:"",type:"",startOrderTime:"",endOrderTime:"",startCreateTime:"",endCreateTime:"",flag:""}),d=c()(o,2),p=d[0],D=d[1],z=(0,f.useState)({}),I=c()(z,2),L=I[0],O=I[1],N=(0,f.useState)({}),U=c()(N,2),R=U[0],W=U[1],E=(0,f.useState)({}),P=c()(E,2),H=P[0],M=P[1],F=(0,f.useState)(""),G=c()(F,2),_=G[0],V=G[1],q=(0,f.useState)(""),J=c()(q,2),X=J[0],K=J[1],Y=(0,f.useState)(!1),Q=c()(Y,2),$=Q[0],ee=Q[1],te=(0,f.useState)(""),ne=c()(te,2),re=ne[0],ie=ne[1],le=(0,f.useState)(""),ae=c()(le,2),oe=ae[0],se=ae[1],de=(0,f.useState)(!1),ce=c()(de,2),ue=ce[0],fe=ce[1],me=(0,f.useState)(!1),xe=c()(me,2),pe=xe[0],ye=xe[1],ve=(0,f.useState)(0),he=c()(ve,2),ge=he[0],je=he[1],be=(0,f.useState)(0),Se=c()(be,2),we=Se[0],Be=Se[1],ke=function(){var e=s()(i()().mark((function e(t){var n,r,o;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a()({pageNum:t,pageSize:10},p),e.next=3,(0,Z.tU)(n);case 3:200==(r=e.sent).code&&(o=r.data.records.map((function(e){return a()(a()({},e),{},{type:0==e.type?"USDT":1==e.type?"SOL":2==e.type?"BTC":"",status:e.status="结算完成",trcNet:0==e.trcNet?"TRC20":1==e.trcNet?"SOL":2==e.trcNet?"BTC":""})})),l(o),O(r.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=s()(i()().mark((function e(){var t,n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a()({},p),e.next=3,(0,Z.z5)(t);case 3:200==(n=e.sent).code&&je(null===(r=n.data)||void 0===r?void 0:r.totalAmount);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=[{title:"结算单号",dataIndex:"orderId",key:"orderId"},{title:"结算时间",dataIndex:"orderTime",key:"orderTime"},{title:"出入金钱包昵称",dataIndex:"fromWalletName",key:"fromWalletName"},{title:"出入金钱包地址",dataIndex:"fromWalletAddress",key:"fromWalletAddress"},{title:"收款钱包地址",dataIndex:"inWalletAddress",key:"inWalletAddress"},{title:"订单Hash",dataIndex:"hashId",key:"hashId"},{title:"主网",dataIndex:"trcNet",key:"trcNet"},{title:"出入金币种",dataIndex:"type",key:"type"},{title:"结算类型",dataIndex:"flag",key:"flag",render:function(e,t){return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("div",{children:0==t.flag?"出金":"入金"})})}},{title:"出入金数量",dataIndex:"money",key:"money",render:function(e,t){return(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{children:[0==t.flag?"-":"+",t.money]})})}},{title:"订单状态",dataIndex:"status",key:"status"},{title:"备注",dataIndex:"remark",key:"remark"},{title:"操作人",dataIndex:"operatorName",key:"operatorName"},{title:"订单创建时间",dataIndex:"createTime",key:"createTime"},{title:"操作",dataIndex:"action",key:"action",render:function(e,t){return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)("a",{onClick:function(){ye(!0),De(t.id)},children:"查看"})})}}],Ze=function(){var e=s()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.vt)(p);case 2:t=e.sent,n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),y().saveAs(n,"data.xlsx");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=s()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={hashId:_},e.next=3,(0,Z.r0)(t);case 3:200==(n=e.sent).code?W(n.data):v.ZP.error(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=s()(i()().mark((function e(t){var n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.gB)(t);case 2:200==(n=e.sent).code?(ye(!0),M(n.data)):v.ZP.error(n.code);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=(0,A.jsxs)("button",{style:{border:0,background:"none"},type:"button",children:[$?(0,A.jsx)(m.Z,{}):(0,A.jsx)(x.Z,{}),(0,A.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),Ie=function(){var e=s()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={orderTime:R.time,fromWalletAddress:R.fromAddress,inWalletAddress:R.toAddress,money:R.amout,gasNum:R.gas,hashId:_,remark:X,type:R.type,trcNet:R.trcNet,flag:we,urlList:[oe]},e.next=3,(0,Z.oA)(t);case 3:n=e.sent,ee(!1),200==n.code?(fe(!1),ke(1),v.ZP.success("结算成功")):v.ZP.error(n.msg);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,A.jsxs)(u._z,{children:[(0,A.jsxs)("div",{style:{display:"flex",marginBottom:20,justifyContent:"space-between",alignItems:"flex-end"},children:[(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金主网"}),(0,A.jsx)(h.Z,{defaultValue:"全部",style:{width:120},value:p.trcNet,onChange:function(e){return D(a()(a()({},p),{},{trcNet:e}))},options:[{value:"0",label:"TRC20"},{value:"1",label:"Solana"},{value:"2",label:"BTC"},{value:"",label:"全部"}]})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金钱包地址"}),(0,A.jsx)(g.Z,{placeholder:"出入金钱包地址",value:p.fromWalletAddress,onChange:function(e){return D(a()(a()({},p),{},{fromWalletAddress:e.target.value}))}})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"订单Hash"}),(0,A.jsx)(g.Z,{placeholder:"订单Hash",value:p.hashId,onChange:function(e){return D(a()(a()({},p),{},{hashId:e.target.value}))}})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金币种"}),(0,A.jsx)(h.Z,{defaultValue:"全部",style:{width:120},value:p.type,onChange:function(e){return D(a()(a()({},p),{},{type:e}))},options:[{value:"0",label:"USDT"},{value:"1",label:"SOL"},{value:"2",label:"BTC"},{value:"",label:"全部"}]})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"结算类型"}),(0,A.jsx)(h.Z,{defaultValue:"全部",style:{width:120},value:p.flag,onChange:function(e){return D(a()(a()({},p),{},{flag:e}))},options:[{value:0,label:"出金"},{value:1,label:"入金"},{value:"",label:"全部"}]})]}),(0,A.jsx)(j.ZP,{type:"primary",onClick:function(){ke(1),Te()},children:"查询"},"primary"),(0,A.jsx)(j.ZP,{type:"primary",style:{marginLeft:10},onClick:function(){D({trcNet:"",fromWalletAddress:"",hashId:"",type:"",startOrderTime:"",endOrderTime:"",startCreateTime:"",endCreateTime:"",flag:""})},children:"重置"},"primary")]}),(0,A.jsxs)("div",{style:{display:"flex",marginBottom:20,alignItems:"flex-end",justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"结算时间"}),(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(b.default,{onChange:function(e,t){return D(a()(a()({},p),{},{startOrderTime:t}))},placeholder:"开始时间",name:"date"}),(0,A.jsx)(b.default,{onChange:function(e,t){return D(a()(a()({},p),{},{endOrderTime:t}))},style:{marginLeft:10},placeholder:"结束时间",name:"date"})]})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"创建时间"}),(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(b.default,{onChange:function(e,t){return D(a()(a()({},p),{},{startCreateTime:t}))},placeholder:"开始时间",name:"date"}),(0,A.jsx)(b.default,{onChange:function(e,t){return D(a()(a()({},p),{},{endCreateTime:t}))},style:{marginLeft:10},placeholder:"结束时间",name:"date"})]})]}),(0,A.jsx)(j.ZP,{type:"primary",onClick:function(){return fe(!0)},children:"新建结算单"},"primary"),(0,A.jsx)(j.ZP,{type:"primary",onClick:Ze,children:"导出表格"},"primary")]}),(0,A.jsxs)("div",{style:{fontSize:20,fontWeight:"bold",marginBottom:30,marginTop:30},children:["结算总资金：",ge," USDT"]}),(0,A.jsx)(S.Z,{dataSource:r,scroll:{x:3e3},columns:Ce,pagination:!1}),(0,A.jsx)(w.Z,{total:null==L?void 0:L.total,style:{marginTop:10},pageSize:null==L?void 0:L.size,current:null==L?void 0:L.current,onChange:function(e){return ke(e)}}),(0,A.jsxs)(B.Z,{title:"结算单",width:"800px",open:ue,onCancel:function(){fe(!1),ie(""),se("")},onOk:Ie,okText:"确定结算",children:[(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转账Hash"}),(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(g.Z,{placeholder:"请输入hash地址",value:_,onChange:function(e){return V(e.target.value)}}),(0,A.jsx)(j.ZP,{type:"primary",style:{marginLeft:10},onClick:function(){return Ae()},children:"获取订单信息"},"primary")]})]}),(0,A.jsx)(k.ZP.Group,{name:"radiogroup",defaultValue:0,style:{marginBottom:10},onChange:function(e){return Be(e.target.value)},options:[{value:0,label:"出金"},{value:1,label:"入金"}]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转出钱包地址"}),(0,A.jsx)(g.Z,{value:R.fromAddress,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金币种"}),(0,A.jsx)(g.Z,{value:0==R.type?"USDT":1==R.type?"SOL":2==R.type?"BTC":"",disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金数量"}),(0,A.jsx)(g.Z,{value:R.amout,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"Gas数量"}),(0,A.jsx)(g.Z,{value:R.gas,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"收款钱包"}),(0,A.jsx)(g.Z,{value:R.toAddress,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"结算时间"}),(0,A.jsx)(g.Z,{value:R.time,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"备注"}),(0,A.jsx)(g.Z,{placeholder:"请输入备注",value:X,onChange:function(e){return K(e.target.value)}})]}),(0,A.jsx)(T.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/sys/upload/file",data:{type:1},beforeUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;return t||v.ZP.error("You can only upload JPG/PNG file!"),t},onChange:function(e){var t,n,r;"uploading"!==e.file.status?"done"===e.file.status&&(t=e.file.originFileObj,n=function(e){ee(!1),ie(e)},(r=new FileReader).addEventListener("load",(function(){return n(r.result)})),r.readAsDataURL(t),200==e.file.response.code&&se(e.file.response.data)):ee(!0)},headers:{Authorization:null===(e=JSON.parse(window.sessionStorage.getItem("userInfo")))||void 0===e?void 0:e.token},children:re?(0,A.jsx)("img",{src:re,alt:"avatar",style:{height:180,width:150}}):ze})]}),(0,A.jsxs)(B.Z,{title:"查看结算单",width:"800px",open:pe,onCancel:function(){ye(!1)},onOk:function(){ye(!1)},okText:"确定",children:[(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转账Hash"}),(0,A.jsx)("div",{style:{display:"flex"},children:(0,A.jsx)(g.Z,{placeholder:"请输入hash地址",disabled:!0,value:null==H?void 0:H.hashId})})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"转出钱包地址"}),(0,A.jsx)(g.Z,{value:null==H?void 0:H.fromWalletAddress,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金币种"}),(0,A.jsx)(g.Z,{value:0==(null==H?void 0:H.type)?"USDT":1==(null==H?void 0:H.type)?"SOL":2==(null==H?void 0:H.type)?"BTC":"",disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"出入金数量"}),(0,A.jsx)(g.Z,{value:null==H?void 0:H.money,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"Gas数量"}),(0,A.jsx)(g.Z,{value:null==H?void 0:H.gasNum,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"收款钱包"}),(0,A.jsx)(g.Z,{value:null==H?void 0:H.inWalletAddress,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"结算时间"}),(0,A.jsx)(g.Z,{value:null==H?void 0:H.updateTime,disabled:!0})]}),(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginBottom:10},children:[(0,A.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"备注"}),(0,A.jsx)(g.Z,{placeholder:"请输入备注",value:null==H?void 0:H.remark,disabled:!0})]}),(0,A.jsx)(C.Z,{width:200,height:200,src:H.urls})]})]})}},93162:function(e,t,n){var r,i,l;i=[],void 0===(l="function"==typeof(r=function(){"use strict";function t(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function r(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function l(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n.g&&n.g.global===n.g?n.g:void 0,o=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,t,n){var o=a.URL||a.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener","string"==typeof e?(s.href=e,s.origin===location.origin?l(s):i(s.href)?r(e,t,n):l(s,s.target="_blank")):(s.href=o.createObjectURL(e),setTimeout((function(){o.revokeObjectURL(s.href)}),4e4),setTimeout((function(){l(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,a){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),n);else if(i(e))r(e,n,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout((function(){l(o)}))}}:function(e,t,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return r(e,t,n);var l="application/octet-stream"===e.type,s=/constructor/i.test(a.HTMLElement)||a.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||l&&s||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=d?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var u=a.URL||a.webkitURL,f=u.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){u.revokeObjectURL(f)}),4e4)}});a.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,i):r)||(e.exports=l)}}]);