"use strict";(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[759],{49980:function(e,t,n){n.d(t,{g4:function(){return s}});var r=0,a=100;function s(){return 0===a?0:r/a*100}},63315:function(e,t,n){n.r(t);var r=n(15009),a=n.n(r),s=n(97857),o=n.n(s),c=n(99289),i=n.n(c),u=n(5574),l=n.n(u),d=n(67294),p=n(90930),m=n(98142),f=n(34041),h=n(66309),x=n(78957),b=n(83622),y=n(2453),v=n(4393),j=n(55102),g=n(4930),k=n(24426),w=n(26412),S=n(55287),Z=n(40110),F=n(58638),I=n(27484),P=n.n(I),C=n(75427),T=n(85893),D=m.default.RangePicker,Y=f.Z.Option;t.default=function(){var e=(0,d.useState)(!1),t=l()(e,2),n=t[0],r=t[1],s=(0,d.useState)([]),c=l()(s,2),u=c[0],m=c[1],I=(0,d.useState)(null),z=l()(I,2),N=z[0],A=z[1],M=(0,d.useState)(!1),_=l()(M,2),O=_[0],U=_[1],R=(0,d.useState)(""),q=l()(R,2),B=q[0],E=q[1],H=(0,d.useState)("all"),K=l()(H,2),V=K[0],W=K[1],J=(0,d.useState)([P()().subtract(7,"days"),P()()]),L=l()(J,2),Q=L[0],G=L[1],X=(0,d.useState)({current:1,pageSize:20,total:0}),$=l()(X,2),ee=$[0],te=$[1],ne=[{title:"交易区块",dataIndex:"blockNumber",key:"blockNumber",width:120,render:function(e){return(0,T.jsx)("a",{href:"https://solscan.io/block/".concat(e),target:"_blank",rel:"noopener noreferrer",style:{color:"#1890ff",fontFamily:"monospace"},children:e})},sorter:function(e,t){return e.blockNumber-t.blockNumber}},{title:"时间",dataIndex:"blockTimestamp",key:"blockTimestamp",width:180,render:function(e){return P()(e).format("YYYY-MM-DD HH:mm:ss")},sorter:function(e,t){return P()(e.blockTimestamp).unix()-P()(t.blockTimestamp).unix()}},{title:"用户地址",dataIndex:"user",key:"user",width:200,ellipsis:!0,render:function(e){return(0,T.jsxs)("span",{title:e,style:{fontFamily:"monospace"},children:[e.slice(0,8),"...",e.slice(-8)]})}},{title:"奖励金额 (PYUSD)",dataIndex:"rewardAmount",key:"rewardAmount",width:150,align:"right",render:function(e){return(0,T.jsx)("span",{style:{fontFamily:"monospace"},children:"number"==typeof e?e.toFixed(6):"0.000000"})},sorter:function(e,t){return e.rewardAmount-t.rewardAmount}},{title:"平台费用 (PYUSD)",dataIndex:"platformFee",key:"platformFee",width:150,align:"right",render:function(e){return(0,T.jsx)("span",{style:{color:"#52c41a",fontWeight:"bold",fontFamily:"monospace"},children:"number"==typeof e?e.toFixed(6):"0.000000"})},sorter:function(e,t){return e.platformFee-t.platformFee}},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){var t={success:{color:"success",text:"成功"},pending:{color:"processing",text:"处理中"},failed:{color:"error",text:"失败"}},n=t[e]||t.success;return(0,T.jsx)(h.Z,{color:n.color,children:n.text})},filters:[{text:"成功",value:"success"},{text:"处理中",value:"pending"},{text:"失败",value:"failed"}],onFilter:function(e,t){return t.status===e}},{title:"操作",key:"action",width:120,render:function(e,t){return(0,T.jsx)(x.Z,{children:(0,T.jsx)(b.ZP,{type:"link",icon:(0,T.jsx)(S.Z,{}),onClick:function(){A(t),U(!0)},children:"详情"})})}}],re=function(){var e=i()(a()().mark((function e(t){var n,s;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,n={current:(null==t?void 0:t.current)||ee.current,pageSize:(null==t?void 0:t.pageSize)||ee.pageSize},Q&&(n.startDate=Q[0].toISOString(),n.endDate=Q[1].toISOString()),B&&(n.user=B),V&&"all"!==V&&(n.status=V),e.next=8,(0,C.BM)(n);case 8:(s=e.sent).success?(m(s.data),te((function(e){return o()(o()({},e),{},{current:n.current,pageSize:n.pageSize,total:s.total})}))):y.ZP.error("获取佣金记录失败"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),y.ZP.error("加载数据失败"),console.error("加载数据错误:",e.t0);case 16:return e.prev=16,r(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[1,12,16,19]])})));return function(t){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){re()}),[Q,B,V]);return(0,T.jsxs)(p._z,{header:{title:"佣金费用记录",breadcrumb:{routes:[{path:"/",breadcrumbName:"首页"},{path:"/commission",breadcrumbName:"佣金费用"},{path:"/commission/records",breadcrumbName:"费用记录"}]}},children:[(0,T.jsxs)(v.Z,{children:[(0,T.jsxs)(x.Z,{style:{marginBottom:16},wrap:!0,children:[(0,T.jsx)(j.Z,{placeholder:"搜索用户地址",prefix:(0,T.jsx)(Z.Z,{}),value:B,onChange:function(e){return E(e.target.value)},onPressEnter:function(){te((function(e){return o()(o()({},e),{},{current:1})})),re({current:1,pageSize:ee.pageSize})},style:{width:250}}),(0,T.jsxs)(f.Z,{value:V,onChange:W,style:{width:120},children:[(0,T.jsx)(Y,{value:"all",children:"全部状态"}),(0,T.jsx)(Y,{value:"success",children:"成功"}),(0,T.jsx)(Y,{value:"pending",children:"处理中"}),(0,T.jsx)(Y,{value:"failed",children:"失败"})]}),(0,T.jsx)(D,{value:Q,onChange:function(e){e&&e[0]&&e[1]?G([e[0],e[1]]):G(null)},showTime:!0}),(0,T.jsx)(b.ZP,{type:"primary",icon:(0,T.jsx)(F.Z,{}),onClick:function(){console.log("导出数据")},children:"导出"})]}),(0,T.jsx)(g.Z,{columns:ne,dataSource:u,rowKey:function(e){return"".concat(e.blockNumber,"_").concat(e.user,"_").concat(e.blockTimestamp)},loading:n,pagination:o()(o()({},ee),{},{showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"第 ".concat(t[0],"-").concat(t[1]," 条/总共 ").concat(e," 条")}}),onChange:function(e){re({current:e.current,pageSize:e.pageSize})}})]}),(0,T.jsx)(k.Z,{title:"佣金费用记录详情",open:O,onCancel:function(){return U(!1)},footer:[(0,T.jsx)(b.ZP,{onClick:function(){return U(!1)},children:"关闭"},"close")],width:800,children:N&&(0,T.jsxs)(w.Z,{column:2,bordered:!0,children:[(0,T.jsx)(w.Z.Item,{label:"区块号",children:N.blockNumber}),(0,T.jsx)(w.Z.Item,{label:"区块时间",children:P()(N.blockTimestamp).format("YYYY-MM-DD HH:mm:ss")}),(0,T.jsx)(w.Z.Item,{label:"用户地址",span:2,children:(0,T.jsx)("span",{style:{fontFamily:"monospace"},children:N.user})}),(0,T.jsx)(w.Z.Item,{label:"金库代币",children:N.vaultMint}),(0,T.jsx)(w.Z.Item,{label:"农场状态",children:N.farmState}),(0,T.jsx)(w.Z.Item,{label:"奖励代币",span:2,children:(0,T.jsx)("span",{style:{fontFamily:"monospace"},children:N.rewardMint})}),(0,T.jsx)(w.Z.Item,{label:"奖励金额",children:(0,T.jsxs)("span",{style:{fontFamily:"monospace"},children:["number"==typeof N.rewardAmount?N.rewardAmount.toFixed(6):"0.000000"," PYUSD"]})}),(0,T.jsx)(w.Z.Item,{label:"总已领取奖励",children:(0,T.jsxs)("span",{style:{fontFamily:"monospace"},children:["number"==typeof N.totalRewardsClaimed?N.totalRewardsClaimed.toFixed(6):"0.000000"," PYUSD"]})}),(0,T.jsx)(w.Z.Item,{label:"平台费用",children:(0,T.jsxs)("span",{style:{color:"#52c41a",fontWeight:"bold",fontFamily:"monospace"},children:["number"==typeof N.platformFee?N.platformFee.toFixed(6):"0.000000"," PYUSD"]})}),(0,T.jsx)(w.Z.Item,{label:"交易状态",children:(0,T.jsx)(h.Z,{color:"success",children:"成功"})}),N.transactionSignature&&(0,T.jsx)(w.Z.Item,{label:"交易签名",span:2,children:(0,T.jsx)("span",{style:{fontFamily:"monospace"},children:N.transactionSignature})})]})})]})}},75427:function(e,t,n){n.d(t,{BM:function(){return l},M2:function(){return x},Vk:function(){return p},lP:function(){return f}});var r=n(15009),a=n.n(r),s=n(99289),o=n.n(s),c=n(21836),i=n(49980),u={NODE_ENV:"production",PUBLIC_PATH:"/"}.MARS_BACKEND_API||"https://api.marsliquidity.com";function l(e){return d.apply(this,arguments)}function d(){return(d=o()(a()().mark((function e(t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.request)("".concat(u,"/api/neon/commission-records"),{method:"POST",data:t});case 3:return n=e.sent,e.abrupt("return",{data:n.data||[],success:n.success,total:n.total||0});case 7:return e.prev=7,e.t0=e.catch(0),console.error("获取佣金记录失败:",e.t0),e.abrupt("return",{data:[],success:!1,total:0});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function p(e){return m.apply(this,arguments)}function m(){return(m=o()(a()().mark((function e(t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.request)("".concat(u,"/api/neon/commission-statistics"),{method:"POST",data:t});case 3:return n=e.sent,e.abrupt("return",n.data||{totalFee:0,totalTransactions:0,avgFee:0,activeUsers:0,currentFeeRate:(0,i.g4)()});case 7:return e.prev=7,e.t0=e.catch(0),console.error("获取统计数据失败:",e.t0),e.abrupt("return",{totalFee:0,totalTransactions:0,avgFee:0,activeUsers:0,currentFeeRate:(0,i.g4)()});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=o()(a()().mark((function e(t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.request)("".concat(u,"/api/neon/user-statistics"),{method:"POST",data:t});case 3:return n=e.sent,e.abrupt("return",n.data||[]);case 7:return e.prev=7,e.t0=e.catch(0),console.error("获取用户统计失败:",e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function x(e){return b.apply(this,arguments)}function b(){return(b=o()(a()().mark((function e(t){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.request)("".concat(u,"/api/neon/trend-data"),{method:"POST",data:t});case 3:return n=e.sent,e.abrupt("return",n.data||[]);case 7:return e.prev=7,e.t0=e.catch(0),console.error("获取趋势数据失败:",e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}}}]);