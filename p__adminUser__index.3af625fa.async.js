"use strict";(self.webpackChunkmars_admin=self.webpackChunkmars_admin||[]).push([[8923],{52581:function(e,t,n){n.r(t);var r=n(15009),i=n.n(r),s=n(97857),l=n.n(s),a=n(99289),o=n.n(a),c=n(5574),u=n.n(c),d=n(2618),f=n(90930),m=n(2453),x=n(83622),p=n(55102),h=n(4930),y=n(78818),v=n(24426),g=n(34041),j=n(67294),S=(n(40190),n(85893));t.default=function(){(0,j.useEffect)((function(){Se(1)}),[]);var e=(0,j.useState)([]),t=u()(e,2),n=t[0],r=t[1],s=(0,j.useState)([]),a=u()(s,2),c=a[0],w=a[1],k=(0,j.useState)(""),Z=u()(k,2),B=Z[0],C=Z[1],N=(0,j.useState)(""),z=u()(N,2),I=z[0],b=z[1],D=(0,j.useState)(""),P=u()(D,2),T=P[0],R=P[1],_=(0,j.useState)(""),E=u()(_,2),O=E[0],F=E[1],G=(0,j.useState)(""),L=u()(G,2),U=L[0],q=L[1],A=(0,j.useState)("0"),H=u()(A,2),J=H[0],K=H[1],M=(0,j.useState)(""),Q=u()(M,2),V=Q[0],W=Q[1],X=(0,j.useState)("0"),Y=u()(X,2),$=Y[0],ee=Y[1],te=(0,j.useState)({}),ne=u()(te,2),re=ne[0],ie=ne[1],se=(0,j.useState)({}),le=u()(se,2),ae=le[0],oe=le[1],ce=(0,j.useState)(!1),ue=u()(ce,2),de=ue[0],fe=ue[1],me=(0,j.useState)(!1),xe=u()(me,2),pe=xe[0],he=xe[1],ye=(0,j.useState)({loginName:""}),ve=u()(ye,2),ge=ve[0],je=ve[1],Se=function(){var e=o()(i()().mark((function e(t){var n,s,a;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={pageNum:t,pageSize:10,loginName:ge.loginName},e.next=3,(0,d.e1)(n);case 3:200==(s=e.sent).code&&(a=s.data.records.map((function(e){return l()(l()({},e),{},{status:0==e.status?"启用":"停用"})})),r(a),ie(s.data));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.kb)();case 2:200==(t=e.sent).code&&(n=t.data.map((function(e){return l()(l()({},e),{},{value:e.id,label:e.roleName})})),w(n));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=[{title:"帐号",dataIndex:"loginName",key:"loginName"},{title:"权限角色",dataIndex:"roleName",key:"roleName"},{title:"是否启用",dataIndex:"status",key:"status"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"action",key:"action",render:function(e,t){return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("a",{style:{marginRight:10},onClick:function(){oe(t),R(t.loginName),F(t.roleId),K(t.status),fe(!0),we()},children:"修改"}),(0,S.jsxs)("a",{style:{marginRight:10},onClick:function(){oe(t),Ce(t)},children:[" ","停用"==t.status?"启用":"停用"]})]})}}],Ze=function(){var e=o()(i()().mark((function e(){var t,n;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={loginName:I,password:V,status:$,roleId:B},e.next=3,(0,d.GU)(t);case 3:200==(n=e.sent).code?(he(!1),Se(1),m.ZP.success("新增成功")):m.ZP.error(n.msg);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=o()(i()().mark((function e(){var t,n,r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="停用"==J?1:"启用"==J?0:J,n={id:ae.id,loginName:T,password:U,status:t,roleId:O},e.next=4,(0,d.NI)(n);case 4:200==(r=e.sent).code?(m.ZP.success("修改成功"),fe(!1),Se(1)):m.ZP.error(r.msg);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=o()(i()().mark((function e(t){var n,r,s;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="停用"==t.status?0:"启用"==t.status?1:t.status,r={id:t.id,loginName:t.loginName,password:t.password,status:n,roleId:t.roleId},e.next=4,(0,d.NI)(r);case 4:200==(s=e.sent).code?(m.ZP.success("操作成功"),fe(!1),Se(1)):m.ZP.error(s.msg);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,j.useEffect)((function(){b(""),W(""),ee("0"),C("")}),[pe]),(0,S.jsxs)(f._z,{children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(x.ZP,{type:"primary",style:{marginTop:30,marginBottom:30},onClick:function(){we(),he(!0)},children:"新增帐户"},"primary"),(0,S.jsx)(p.Z,{placeholder:"用户帐号",style:{width:200,marginLeft:20,marginRight:20},value:ge.loginName,onChange:function(e){return je(l()(l()({},ge),{},{loginName:e.target.value}))}}),(0,S.jsx)(x.ZP,{type:"primary",style:{marginTop:30,marginBottom:30},onClick:function(){return Se(1)},children:"查询"},"primary")]}),(0,S.jsx)(h.Z,{dataSource:n,columns:ke,pagination:!1}),(0,S.jsx)(y.Z,{total:null==re?void 0:re.total,style:{marginTop:10},pageSize:null==re?void 0:re.size,current:null==re?void 0:re.current,onChange:function(e){return Se(e)}}),(0,S.jsxs)(v.Z,{title:"新增用户",open:pe,onCancel:function(){return he(!1)},onOk:function(){return Ze()},children:[(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"用户帐号"}),(0,S.jsx)(p.Z,{style:{width:300},placeholder:"用户帐号",value:I,onChange:function(e){return b(e.target.value)}})]})}),(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"密码"}),(0,S.jsx)(p.Z,{style:{width:300},placeholder:"密码",value:V,onChange:function(e){return W(e.target.value)}})]})}),(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"是否启用"}),(0,S.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,S.jsx)(g.Z,{style:{width:120},value:$+"",onChange:function(e){return ee(e)},options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]})})]})}),(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"权限"}),(0,S.jsx)(g.Z,{style:{width:200},value:B,onChange:function(e){return C(e)},options:c})]})})]}),(0,S.jsxs)(v.Z,{title:"修改用户",open:de,onCancel:function(){return fe(!1)},onOk:function(){return Be()},children:[(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"用户帐号"}),(0,S.jsx)(p.Z,{style:{width:300},placeholder:"用户帐号",value:T,onChange:function(e){return R(e.target.value)}})]})}),(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"密码"}),(0,S.jsx)(p.Z,{style:{width:300},placeholder:"不填则不修改密码",value:U,onChange:function(e){return q(e.target.value)}})]})}),(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"是否启用"}),(0,S.jsx)("div",{style:{fontSize:14,color:"#222",flex:1},children:(0,S.jsx)(g.Z,{style:{width:120},value:J+"",onChange:function(e){return K(e)},options:[{label:"启用",value:"0"},{label:"停用",value:"1"}]})})]})}),(0,S.jsx)("div",{style:{display:"flex",marginBottom:10},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,S.jsx)("div",{style:{fontSize:14,color:"#222",marginBottom:10},children:"权限"}),(0,S.jsx)(g.Z,{style:{width:200},value:O,onChange:function(e){return F(e)},options:c})]})})]})]})}},40190:function(){}}]);